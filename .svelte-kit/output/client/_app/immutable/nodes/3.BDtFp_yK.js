import{a as $,f as k,t as Ke}from"../chunks/DYOR36WO.js";import"../chunks/CcCAcYtz.js";import{o as Qe,a as st}from"../chunks/9E4dF-An.js";import{U as Se,ag as M,B as h,m as R,l as e,ah as $e,X as u,W as y,av as ot,Y as v,af as E,u as l,V as Pe,Z as L,aR as he,ae as Ue,G as Me,aS as dt}from"../chunks/B3tR_vzS.js";import{s as F}from"../chunks/p0_JILK_.js";import{i as ne}from"../chunks/Chkda7mK.js";import{s as qe}from"../chunks/BT9b3L6y.js";import{e as W}from"../chunks/LtqmgyD5.js";import{i as Ne}from"../chunks/DbUAflhX.js";import{p as pe}from"../chunks/DVt25r4J.js";import{s as nt}from"../chunks/C3p8M5LI.js";import{e as ie,i as me,a as ge,s as de,c as lt,n as Te,b as vt,f as be,r as ct,g as fe}from"../chunks/BZ-v3JAU.js";var mt=k("<div> </div>"),ut=k('<div class="py-1 text-center font-semibold"> </div>'),pt=k('<div class="py-1 text-center"> </div>'),ft=k("<div></div>"),ht=k('<div class="py-1 text-center font-semibold"> </div>'),_t=k('<div class="border border-white/10 rounded text-xs scroll-container stats-table-container"><div class="grid"><div><div class="px-1 py-1 font-semibold text-left border-b-2 border-white/20">PLAYER</div> <!> <div class="border-t-2 border-white/20 px-1 py-1 font-semibold text-left">TOTAL</div></div> <div class="overflow-x-auto" data-scrollable="true"><div class="grid border-b-2 border-white/20"></div> <!> <div class="grid border-t-2 border-white/20"></div></div></div></div>');function bt(ue,U){Se(U,!1);const T=L(),t=L(),Q=L(),q=L(),j=L(),S=L();let V=pe(U,"players",8);const i=["MIN","PTS","REB","AST","STL","BLK","OREB","DREB","FGM","FGA","FG%","3PM","3PA","3P%","FTM","FTA","FT%","PF","TO","+/-"],Y=["FG%","3P%","FT%"],K=i.filter(p=>p!=="MIN"&&p!=="+/-"&&!Y.includes(p));function X(p,c){return c==="FG%"?p.stats["FG%"]+"%":c==="3P%"?p.stats["3P%"]+"%":c==="FT%"?p.stats["FT%"]+"%":p.stats[c]}function m(p){const c=(p||"").split(" ").filter(Boolean);if(c.length===0)return p||"";if(c.length===1)return c[0];const r=c[0][0].toUpperCase()+".",a=c.slice(1).join(" ");return`${r} ${a}`}function Z(p,c){return c>0?Math.round(p/c*100):0}function se(p,c){return p.reduce((r,a)=>{var _;const f=Number(((_=a==null?void 0:a.stats)==null?void 0:_[c])??0);return r+(Number.isFinite(f)?f:0)},0)}function le(p){const c={};for(const r of K)c[r]=se(p,r);return c.MIN="",c["+/-"]="",c["FG%"]=`${Z(Number(c.FGM??0),Number(c.FGA??0))}%`,c["3P%"]=`${Z(Number(c["3PM"]??0),Number(c["3PA"]??0))}%`,c["FT%"]=`${Z(Number(c.FTM??0),Number(c.FTA??0))}%`,c}M(()=>R(V()),()=>{h(T,V()??[])}),M(()=>e(T),()=>{h(t,e(T).map(p=>({...p,displayName:m((p==null?void 0:p.name)??""),statValues:i.map(c=>X(p,c))})))}),M(()=>e(T),()=>{h(Q,le(e(T)))}),M(()=>e(t),()=>{h(q,Math.max(...e(t).map(p=>p.displayName.length),6))}),M(()=>e(q),()=>{h(j,`${Math.min(e(q),13)}ch`)}),M(()=>{},()=>{h(S,"2.2rem")}),$e(),Ne();var J=_t(),te=u(J),re=u(te),g=y(u(re),2);ie(g,1,()=>e(t),me,(p,c,r)=>{var a=mt();de(a,1,`${r===5?"border-t-2 border-white/20":"border-t border-white/5"} px-1 py-1 text-left truncate`);var f=u(a,!0);v(a),E(()=>F(f,(e(c),l(()=>e(c).displayName)))),$(p,a)}),ot(2),v(re);var b=y(re,2),P=u(b);ie(P,5,()=>i,me,(p,c)=>{var r=ut(),a=u(r,!0);v(r),E(()=>F(a,e(c))),$(p,r)}),v(P);var O=y(P,2);ie(O,1,()=>e(t),me,(p,c,r)=>{var a=ft();de(a,1,`grid ${r===5?"border-t-2 border-white/20":"border-t border-white/5"}`),ie(a,5,()=>(e(c),l(()=>e(c).statValues)),me,(f,_)=>{var I=pt(),G=u(I,!0);v(I),E(()=>F(G,e(_)??"")),$(f,I)}),v(a),E(()=>ge(a,`width:max-content; grid-template-columns: repeat(${l(()=>i.length)??""}, ${e(S)??""})`)),$(p,a)});var B=y(O,2);ie(B,5,()=>i,me,(p,c)=>{var r=ht(),a=u(r,!0);v(r),E(()=>F(a,(e(Q),e(c),l(()=>e(Q)[e(c)]??"")))),$(p,r)}),v(B),v(b),v(te),v(J),E(()=>{ge(te,`grid-template-columns: ${e(j)??""} 1fr`),ge(P,`width:max-content; grid-template-columns: repeat(${l(()=>i.length)??""}, ${e(S)??""})`),ge(B,`width:max-content; grid-template-columns: repeat(${l(()=>i.length)??""}, ${e(S)??""})`)}),$(ue,J),Pe()}var xt=k('<div class="px-2 py-1 text-right font-semibold"> </div>'),yt=k('<div class="px-2 py-1 text-right font-semibold"></div>'),wt=k('<div class="px-2 py-1 text-right"> </div>'),gt=k('<div class="px-2 py-1 text-right"> </div>'),Tt=k('<div class="px-2 py-1 text-right"> </div>'),St=k('<div class="px-2 py-1 text-right"> </div>'),$t=k('<div class="mb-2 border border-white/10 rounded text-xs swipe-area"><div class="grid"><div class="sticky-col px-2 py-1 font-semibold text-left">TEAM</div> <div></div> <!> <div class="px-2 py-1 text-right font-semibold">TOT</div> <!> <div class="sticky-col px-2 py-1 text-left"> </div> <div></div> <!> <div class="px-2 py-1 text-right font-semibold"> </div> <!> <div class="sticky-col px-2 py-1 text-left"> </div> <div></div> <!> <div class="px-2 py-1 text-right font-semibold"> </div> <!></div></div>');function Pt(ue,U){Se(U,!1);const T=L(),t=L(),Q=L(),q=L(),j=L(),S=L(),V=L();let i=pe(U,"linescores",8);function Y(r){return(r==null?void 0:r.abbreviation)||(r==null?void 0:r.shortDisplayName)||(r!=null&&r.displayName?r.displayName.split(" ").map(a=>a[0]).join("").toUpperCase():"")}M(()=>R(i()),()=>{var r,a,f,_,I,G;h(T,Math.max(4,((f=(a=(r=i())==null?void 0:r.home)==null?void 0:a.periods)==null?void 0:f.length)??0,((G=(I=(_=i())==null?void 0:_.away)==null?void 0:I.periods)==null?void 0:G.length)??0))}),M(()=>e(T),()=>{h(t,Math.max(0,e(T)-4))}),M(()=>R(i()),()=>{var r,a;h(Q,Y((a=(r=i())==null?void 0:r.away)==null?void 0:a.team)||"")}),M(()=>R(i()),()=>{var r,a;h(q,Y((a=(r=i())==null?void 0:r.home)==null?void 0:a.team)||"")}),M(()=>(e(Q),e(q)),()=>{h(j,Math.max(e(Q).length,e(q).length))}),M(()=>e(j),()=>{h(S,`${Math.min(Math.max(e(j),3),6)}ch`)}),M(()=>(e(S),e(t)),()=>{h(V,`${e(S)} 1fr repeat(4, 2.2rem) 2.2rem${e(t)>0?` repeat(${e(t)}, 2.2rem)`:""}`)}),$e(),Ne();var K=$t(),X=u(K),m=y(u(X),4);ie(m,0,()=>[1,2,3,4],me,(r,a)=>{var f=xt(),_=u(f);v(f),E(()=>F(_,`Q${a??""}`)),$(r,f)});var Z=y(m,4);ie(Z,1,()=>(e(t),l(()=>Array(e(t)))),me,(r,a,f)=>{var _=yt();_.textContent=`OT${f+1}`,$(r,_)});var se=y(Z,2),le=u(se,!0);v(se);var J=y(se,4);ie(J,0,()=>[0,1,2,3],me,(r,a)=>{var f=wt(),_=u(f,!0);v(f),E(()=>F(_,(R(i()),l(()=>{var I,G,s;return((s=(G=(I=i())==null?void 0:I.away)==null?void 0:G.periods)==null?void 0:s[a])??""})))),$(r,f)});var te=y(J,2),re=u(te,!0);v(te);var g=y(te,2);ie(g,1,()=>(e(t),l(()=>Array(e(t)))),me,(r,a,f)=>{var _=gt(),I=u(_,!0);v(_),E(()=>F(I,(R(i()),l(()=>{var G,s,C;return((C=(s=(G=i())==null?void 0:G.away)==null?void 0:s.periods)==null?void 0:C[f+4])??""})))),$(r,_)});var b=y(g,2),P=u(b,!0);v(b);var O=y(b,4);ie(O,0,()=>[0,1,2,3],me,(r,a)=>{var f=Tt(),_=u(f,!0);v(f),E(()=>F(_,(R(i()),l(()=>{var I,G,s;return((s=(G=(I=i())==null?void 0:I.home)==null?void 0:G.periods)==null?void 0:s[a])??""})))),$(r,f)});var B=y(O,2),p=u(B,!0);v(B);var c=y(B,2);ie(c,1,()=>(e(t),l(()=>Array(e(t)))),me,(r,a,f)=>{var _=St(),I=u(_,!0);v(_),E(()=>F(I,(R(i()),l(()=>{var G,s,C;return((C=(s=(G=i())==null?void 0:G.home)==null?void 0:s.periods)==null?void 0:C[f+4])??""})))),$(r,_)}),v(X),v(K),E((r,a)=>{ge(X,`grid-template-columns: ${e(V)??""}`),F(le,r),F(re,(R(i()),l(()=>{var f,_;return(_=(f=i())==null?void 0:f.away)==null?void 0:_.total}))),F(P,a),F(p,(R(i()),l(()=>{var f,_;return(_=(f=i())==null?void 0:f.home)==null?void 0:_.total})))},[()=>(R(i()),l(()=>{var r,a;return Y((a=(r=i())==null?void 0:r.away)==null?void 0:a.team)})),()=>(R(i()),l(()=>{var r,a;return Y((a=(r=i())==null?void 0:r.home)==null?void 0:a.team)}))]),$(ue,K),Pe()}var Nt=k('<div class="grid grid-cols-2 gap-2 mb-2 swipe-area"><button> </button> <button> </button></div>'),At=k('<div><div class="grid grid-cols-3 gap-2 mb-2 swipe-area"><div class="text-center"><button>LIVE</button> <div></div></div> <div class="text-center"><button>STATS</button> <div></div></div> <div class="text-center"><button>POST</button> <div></div></div></div> <!> <!> <!> <div><!></div></div>');function kt(ue,U){Se(U,!1);const T=L(),t=L(),Q=L();let q=pe(U,"eventId",8),j=pe(U,"players",8),S=pe(U,"linescores",8),V=L("away"),i=L("STATS");Qe(()=>{try{const s=localStorage.getItem(`arrnba.lastSide.${q()}`);(s==="home"||s==="away")&&h(V,s);const C=localStorage.getItem(`arrnba.viewMode.${q()}`);(C==="STATS"||C==="LIVE"||C==="POST")&&h(i,C)}catch{}});function Y(s){if(e(V)!==s){h(V,s);try{localStorage.setItem(`arrnba.lastSide.${q()}`,s)}catch{}}}function K(s){if(e(i)!==s){h(i,s);try{localStorage.setItem(`arrnba.viewMode.${q()}`,s)}catch{}}}function X(s){if(s==="right"){e(i)==="STATS"?K("LIVE"):e(i)==="LIVE"?K("POST"):K("STATS");return}e(i)==="STATS"?K("POST"):e(i)==="POST"?K("LIVE"):K("STATS")}lt({onSwipeRight:()=>X("right"),onSwipeLeft:()=>X("left"),threshold:50});function m(s){return(s==null?void 0:s.abbreviation)||(s==null?void 0:s.shortDisplayName)||(s!=null&&s.displayName?s.displayName.split(" ").map(C=>C[0]).join("").toUpperCase():"")}M(()=>(R(j()),e(V)),()=>{var s;h(T,((s=j())==null?void 0:s[e(V)])??[])}),M(()=>R(S()),()=>{var s,C;h(t,(C=(s=S())==null?void 0:s.away)!=null&&C.team?m(S().away.team):"")}),M(()=>R(S()),()=>{var s,C;h(Q,(C=(s=S())==null?void 0:s.home)!=null&&C.team?m(S().home.team):"")}),$e(),Ne();var Z=At(),se=u(Z),le=u(se),J=u(le),te=y(J,2);v(le);var re=y(le,2),g=u(re),b=y(g,2);v(re);var P=y(re,2),O=u(P),B=y(O,2);v(P),v(se);var p=y(se,2);{var c=s=>{Pt(s,{get linescores(){return S()}})};ne(p,s=>{e(i)==="STATS"&&S()&&s(c)})}var r=y(p,2);{var a=s=>{var C=Nt(),o=u(C),N=u(o,!0);v(o);var A=y(o,2),x=u(A,!0);v(A),v(C),E(()=>{de(o,1,`w-full py-2 rounded font-semibold ${e(V)==="away"?"bg-white/25 text-white":"bg-black text-white border border-white/20"}`),F(N,e(t)),de(A,1,`w-full py-2 rounded font-semibold ${e(V)==="home"?"bg-white/25 text-white":"bg-black text-white border border-white/20"}`),F(x,e(Q))}),W("click",o,()=>Y("away")),W("click",A,()=>Y("home")),$(s,C)};ne(r,s=>{e(i)==="STATS"&&S()&&s(a)})}var f=y(r,2);{var _=s=>{bt(s,{get players(){return e(T)}})};ne(f,s=>{e(i)==="STATS"&&j()&&s(_)})}var I=y(f,2),G=u(I);nt(G,U,"reddit",{get mode(){return e(i)},get side(){return e(V)}}),v(I),v(Z),E(()=>{de(J,1,`w-full py-2 font-semibold ${e(i)==="LIVE"?"text-white":"text-white/70"}`),de(te,1,`${e(i)==="LIVE"?"bg-white":"bg-transparent"} h-0.5 w-full mt-2`),de(g,1,`w-full py-2 font-semibold ${e(i)==="STATS"?"text-white":"text-white/70"}`),de(b,1,`${e(i)==="STATS"?"bg-white":"bg-transparent"} h-0.5 w-full mt-2`),de(O,1,`w-full py-2 font-semibold ${e(i)==="POST"?"text-white":"text-white/70"}`),de(B,1,`${e(i)==="POST"?"bg-white":"bg-transparent"} h-0.5 w-full mt-2`),de(I,1,`${e(i)==="STATS"?"hidden":""} swipe-area`)}),W("click",J,()=>K("LIVE")),W("click",g,()=>K("STATS")),W("click",O,()=>K("POST")),$(ue,Z),Pe()}var It=k('<a class="text-white/70 hover:text-white underline" target="_blank" rel="noopener noreferrer">Open Thread</a>'),Ft=k('<div class="text-white/70 flex items-center gap-2"><div class="animate-spin w-4 h-4 border-2 border-white/30 border-t-white rounded-full"></div> Loading comments...</div>'),Et=k('<div class="bg-red-900/20 border border-red-500/50 rounded p-3 mb-3"><div class="text-red-400 font-semibold mb-1">Reddit Error</div> <div class="text-sm text-red-300/80"> </div> <button class="mt-2 text-xs underline text-red-400 hover:text-red-300">Try again</button></div>'),Lt=k('<div class="text-white/70">No comments yet.</div>'),Ot=k('<div class="whitespace-pre-wrap"> </div>'),Ct=k('<div role="button" tabindex="0" class="w-full text-left cursor-pointer"><div class="text-sm text-white/70"> </div> <!></div>'),Rt=k('<div class="mt-2 pl-3 border-l border-white/10 space-y-2"></div>'),Vt=k('<div class="whitespace-pre-wrap"> </div> <!>',1),Bt=k('<div role="button" tabindex="0" class="w-full text-left cursor-pointer"><div class="text-sm text-white/70"> </div> <!></div>'),Gt=k('<div class="mt-2 pl-3 border-l border-white/10 space-y-2"></div>'),Kt=k('<div class="mt-1 whitespace-pre-wrap"> </div> <!>',1),Mt=k('<div role="button" tabindex="0" class="w-full text-left border border-white/10 rounded p-2 cursor-pointer"><div class="text-sm text-white/70"> </div> <!></div>'),Ut=k('<div class="space-y-3"></div>'),qt=k('<div><div class="flex items-center justify-between mb-3"><div class="flex items-center gap-2 text-xs font-semibold"><button>NEW</button> <button>TOP</button> <button class="px-3 py-1 rounded bg-blue-600 hover:bg-blue-700 text-white">REFRESH</button></div> <!></div> <!></div>');function Dt(ue,U){Se(U,!1);const T=L(),t=L(),Q=L();let q=pe(U,"awayName",8),j=pe(U,"homeName",8),S=pe(U,"mode",8),V=L("new"),i=L(!1),Y=L(""),K={LIVE:!1,POST:!1},X=0,m=L({LIVE:{thread:null,comments:[]},POST:{thread:null,comments:[]}});async function Z(o,N,A,x=!1){if(!(o!=null&&o.id))return;const d=++X;h(Y,""),e(m)[A].comments.length||h(i,!0);try{const n=await Te.getRedditComments(o.id,N,o.permalink,x);if(d!==X||S()!==A)return;he(m,e(m)[A].comments=re(n.comments??[],e(V))),h(m,{...e(m)})}catch(n){if(d!==X||S()!==A)return;console.error("Failed to fetch comments:",n),h(Y,n instanceof Error?n.message:"Failed to fetch comments")}finally{d===X&&S()===A&&h(i,!1)}}async function se(o){const N=o==="POST"?"top":"new";try{const x=(await Te.getRedditIndex())[vt(q(),j())];let d=o==="POST"?x==null?void 0:x.pgt:x==null?void 0:x.gdt;if(d){he(m,e(m)[o].thread=d),h(m,{...e(m)}),await Z(d,N,o);return}if(K[o])S()===o&&!e(m)[o].thread&&(he(m,e(m)[o].comments=[]),h(m,{...e(m)}),h(i,!1));else{K[o]=!0,e(m)[o].thread||h(i,!0);const n=await Te.searchRedditThread({type:o==="POST"?"post":"live",awayCandidates:[q()],homeCandidates:[j()]});d=(n==null?void 0:n.post)??null,d?(he(m,e(m)[o].thread=d),h(m,{...e(m)}),await Z(d,N,o)):S()===o&&(he(m,e(m)[o].thread=null),he(m,e(m)[o].comments=[]),h(m,{...e(m)}),h(i,!1))}}catch(A){console.error(`Error ensuring ${o} thread:`,A),S()===o&&h(i,!1)}}function le(o){var A;if(!e(T))return;const N=(A=e(m)[e(T)].comments)==null?void 0:A[o];N&&(N._collapsed=!N._collapsed,h(m,{...e(m)}))}function J(o,N){var x,d,n;if(!e(T))return;const A=(n=(d=(x=e(m)[e(T)].comments)==null?void 0:x[o])==null?void 0:d.replies)==null?void 0:n[N];A&&(A._collapsed=!A._collapsed,h(m,{...e(m)}))}function te(o,N,A){var d,n,w,ee,z;if(!e(T))return;const x=(z=(ee=(w=(n=(d=e(m)[e(T)].comments)==null?void 0:d[o])==null?void 0:n.replies)==null?void 0:w[N])==null?void 0:ee.replies)==null?void 0:z[A];x&&(x._collapsed=!x._collapsed,h(m,{...e(m)}))}function re(o,N){const A=(d,n)=>N==="top"?((n==null?void 0:n.score)??0)-((d==null?void 0:d.score)??0):((n==null?void 0:n.created_utc)??0)-((d==null?void 0:d.created_utc)??0);function x(d){const n=(d||[]).map(w=>({...w,replies:x((w==null?void 0:w.replies)||[])}));return n.sort(A),n}return x(o||[])}function g(){e(T)&&(he(m,e(m)[e(T)].comments=re(e(m)[e(T)].comments,e(V))),h(m,{...e(m)}))}async function b(){if(!e(T))return;const o=e(m)[e(T)].thread;if(!o)return;const N=e(T)==="POST"?"top":"new";await Z(o,N,e(T),!0)}M(()=>R(S()),()=>{h(T,S()==="LIVE"||S()==="POST"?S():null)}),M(()=>(e(T),e(m)),()=>{h(t,e(T)?e(m)[e(T)].thread:null)}),M(()=>(e(T),e(m)),()=>{h(Q,e(T)?e(m)[e(T)].comments:[])}),M(()=>R(S()),()=>{if(S()==="LIVE"||S()==="POST"){const o=S()==="POST"?"top":"new";h(V,o),se(S())}else h(i,!1)}),$e(),Ne();var P=qt(),O=u(P),B=u(O),p=u(B),c=y(p,2),r=y(c,2);v(B);var a=y(B,2);{var f=o=>{var N=It();E(()=>qe(N,"href",(e(t),l(()=>e(t).url||(e(t).permalink?`https://www.reddit.com${e(t).permalink}`:`https://www.reddit.com/comments/${e(t).id}`))))),$(o,N)};ne(a,o=>{e(t)&&o(f)})}v(O);var _=y(O,2);{var I=o=>{var N=Ft();$(o,N)},G=o=>{var N=Et(),A=y(u(N),2),x=u(A,!0);v(A);var d=y(A,2);v(N),E(()=>F(x,e(Y))),W("click",d,b),$(o,N)},s=o=>{var N=Lt();$(o,N)},C=o=>{var N=Ut();ie(N,7,()=>e(Q),(A,x)=>A.id||x,(A,x,d)=>{var n=Mt(),w=u(n),ee=u(w);v(w);var z=y(w,2);{var oe=H=>{var xe=Kt(),_e=Ue(xe),Ae=u(_e,!0);v(_e);var je=y(_e,2);{var Ye=Ie=>{var Fe=Gt();ie(Fe,7,()=>(e(x),l(()=>e(x).replies)),(Ee,D)=>Ee.id||D,(Ee,D,ke)=>{var ye=Bt(),Le=u(ye),He=u(Le);v(Le);var Xe=y(Le,2);{var Ze=ve=>{var De=Vt(),Oe=Ue(De),ze=u(Oe,!0);v(Oe);var Je=y(Oe,2);{var et=Ce=>{var Re=Rt();ie(Re,7,()=>(e(D),l(()=>e(D).replies)),(Ve,ae)=>Ve.id||ae,(Ve,ae,We)=>{var we=Ct(),Be=u(we),tt=u(Be);v(Be);var rt=y(Be,2);{var at=ce=>{var Ge=Ot(),it=u(Ge,!0);v(Ge),E(()=>F(it,(e(ae),l(()=>e(ae).body)))),$(ce,Ge)};ne(rt,ce=>{e(ae),l(()=>!e(ae)._collapsed)&&ce(at)})}v(we),E(ce=>F(tt,`${e(ae),l(()=>e(ae).author)??""} - ${e(ae),l(()=>e(ae).score)??""} - ${ce??""} ${e(ae),l(()=>e(ae)._collapsed?"- collapsed":"")??""}`),[()=>(R(be),e(ae),l(()=>be(e(ae).created_utc)))]),W("click",we,ce=>{ce.stopPropagation(),te(e(d),e(ke),e(We))}),W("keydown",we,ce=>{(ce.key==="Enter"||ce.key===" ")&&(ce.stopPropagation(),te(e(d),e(ke),e(We)))}),$(Ve,we)}),v(Re),$(Ce,Re)};ne(Je,Ce=>{e(D),l(()=>e(D).replies&&e(D).replies.length)&&Ce(et)})}E(()=>F(ze,(e(D),l(()=>e(D).body)))),$(ve,De)};ne(Xe,ve=>{e(D),l(()=>!e(D)._collapsed)&&ve(Ze)})}v(ye),E(ve=>F(He,`${e(D),l(()=>e(D).author)??""} - ${e(D),l(()=>e(D).score)??""} - ${ve??""} ${e(D),l(()=>e(D)._collapsed?"- collapsed":"")??""}`),[()=>(R(be),e(D),l(()=>be(e(D).created_utc)))]),W("click",ye,ve=>{ve.stopPropagation(),J(e(d),e(ke))}),W("keydown",ye,ve=>{(ve.key==="Enter"||ve.key===" ")&&(ve.stopPropagation(),J(e(d),e(ke)))}),$(Ee,ye)}),v(Fe),$(Ie,Fe)};ne(je,Ie=>{e(x),l(()=>e(x).replies&&e(x).replies.length)&&Ie(Ye)})}E(()=>F(Ae,(e(x),l(()=>e(x).body)))),$(H,xe)};ne(z,H=>{e(x),l(()=>!e(x)._collapsed)&&H(oe)})}v(n),E(H=>F(ee,`${e(x),l(()=>e(x).author)??""} - ${e(x),l(()=>e(x).score)??""} - ${H??""} ${e(x),l(()=>e(x)._collapsed?"- collapsed":"")??""}`),[()=>(R(be),e(x),l(()=>be(e(x).created_utc)))]),W("click",n,()=>le(e(d))),W("keydown",n,H=>{(H.key==="Enter"||H.key===" ")&&le(e(d))}),$(A,n)}),v(N),$(o,N)};ne(_,o=>{e(i)?o(I):e(Y)?o(G,1):e(t)?o(C,!1):o(s,2)})}v(P),E(()=>{de(p,1,`px-3 py-1 rounded ${e(V)==="new"?"bg-white/25 text-white":"bg-black text-white border border-white/20"}`),de(c,1,`px-3 py-1 rounded ${e(V)==="top"?"bg-white/25 text-white":"bg-black text-white border border-white/20"}`)}),W("click",p,()=>{h(V,"new"),g()}),W("click",c,()=>{h(V,"top"),g()}),W("click",r,b),$(ue,P),Pe()}var Wt=k('<div class="flex items-center justify-between text-lg font-semibold"><div class="flex items-center gap-2"><img alt="away" width="28" height="28" loading="eager" decoding="async"/> <span> </span></div> <span> </span> <div class="flex items-center gap-2"><span> </span> <img alt="home" width="28" height="28" loading="eager" decoding="async"/></div></div> <div class="text-center text-white/70 text-sm mt-1"><!></div>',1),Qt=k('<div class="text-red-400"> </div>'),jt=k('<div slot="reddit"><!></div>'),Yt=k('<div class="flex items-center justify-center py-8"><div class="animate-spin w-8 h-8 border-4 border-white/10 border-t-white/70 rounded-full"></div></div>'),Ht=k('<div class="p-4"><button class="text-white/70 hover:text-white">Back</button> <div class="mt-2 mb-2 min-h-[60px] swipe-area"><!></div> <!></div>');function nr(ue,U){Se(U,!1);let T=pe(U,"data",8),t=L(null),Q,q,j=L();async function S(){try{const g=await Te.getBoxscore(T().id);h(t,{...g})}catch(g){console.error("Failed to refresh boxscore:",g)}}async function V(){var P,O,B,p,c,r,a,f;const g=(p=(B=(O=(P=e(t))==null?void 0:P.linescores)==null?void 0:O.away)==null?void 0:B.team)==null?void 0:p.displayName,b=(f=(a=(r=(c=e(t))==null?void 0:c.linescores)==null?void 0:r.home)==null?void 0:a.team)==null?void 0:f.displayName;if(!(!g||!b))try{await ct(Te,g,b)}catch(_){console.error("Failed to refresh Reddit data:",_)}}Qe(()=>{e(t)||S(),Q=setInterval(S,15e3),q=setInterval(V,3e4)}),st(()=>{Q&&clearInterval(Q),q&&clearInterval(q)});function i(g){const b=(g||"").trim();if(!b)return"";const P=/Q(\d)\s+([0-9:]+)/i.exec(b);if(P){const O=P[1];return`${P[2]} Q${O}`}return b.toUpperCase()}function Y(g){const b=g.currentTarget;b&&(b.style.display="none")}M(()=>(R(T()),e(j),e(t)),()=>{var g;if((g=T().streamed)!=null&&g.payload){const b=T().streamed.payload;b===e(j)||(h(j,b),b.then(P=>{e(t)||h(t,P)}).catch(P=>{console.error("Failed to load streamed payload:",P)}))}}),$e(),Ne();var K=Ht(),X=u(K),m=y(X,2),Z=u(m);{var se=g=>{var b=Wt(),P=Ue(b),O=u(P),B=u(O),p=y(B,2),c=u(p,!0);v(p),v(O);var r=y(O,2),a=u(r);v(r);var f=y(r,2),_=u(f),I=u(_,!0);v(_);var G=y(_,2);v(f),v(P);var s=y(P,2),C=u(s);{var o=d=>{var n=Ke("FINAL");$(d,n)},N=dt(()=>(e(t),l(()=>{var d,n,w,ee,z,oe;return((n=(d=e(t))==null?void 0:d.status)==null?void 0:n.name)&&((oe=(z=(ee=(w=e(t))==null?void 0:w.status)==null?void 0:ee.name)==null?void 0:z.toUpperCase())==null?void 0:oe.includes("FINAL"))}))),A=d=>{var n=Ke();E(w=>F(n,w),[()=>(e(t),l(()=>{var w,ee;return i((ee=(w=e(t))==null?void 0:w.status)==null?void 0:ee.short)}))]),$(d,n)},x=d=>{var n=Ke();E(w=>F(n,w),[()=>(e(t),l(()=>{var w,ee,z,oe,H,xe,_e,Ae;return i((ee=(w=e(t))==null?void 0:w.status)!=null&&ee.clock&&((oe=(z=e(t))==null?void 0:z.status)!=null&&oe.period)?`Q${(xe=(H=e(t))==null?void 0:H.status)==null?void 0:xe.period} ${(Ae=(_e=e(t))==null?void 0:_e.status)==null?void 0:Ae.clock}`:"")}))]),$(d,n)};ne(C,d=>{e(N)?d(o):(e(t),l(()=>{var n,w;return(w=(n=e(t))==null?void 0:n.status)==null?void 0:w.short})?d(A,1):d(x,!1))})}v(s),E((d,n,w,ee)=>{qe(B,"src",d),F(c,n),F(a,`${e(t),l(()=>{var z,oe,H;return(H=(oe=(z=e(t))==null?void 0:z.linescores)==null?void 0:oe.away)==null?void 0:H.total})??""} - ${e(t),l(()=>{var z,oe,H;return(H=(oe=(z=e(t))==null?void 0:z.linescores)==null?void 0:oe.home)==null?void 0:H.total})??""}`),F(I,w),qe(G,"src",ee)},[()=>(R(fe),e(t),l(()=>{var d,n,w;return`/logos/${fe((w=(n=(d=e(t))==null?void 0:d.linescores)==null?void 0:n.away)==null?void 0:w.team)}.svg`})),()=>(R(fe),e(t),l(()=>{var d,n,w;return fe((w=(n=(d=e(t))==null?void 0:d.linescores)==null?void 0:n.away)==null?void 0:w.team)})),()=>(R(fe),e(t),l(()=>{var d,n,w;return fe((w=(n=(d=e(t))==null?void 0:d.linescores)==null?void 0:n.home)==null?void 0:w.team)})),()=>(R(fe),e(t),l(()=>{var d,n,w;return`/logos/${fe((w=(n=(d=e(t))==null?void 0:d.linescores)==null?void 0:n.home)==null?void 0:w.team)}.svg`}))]),W("error",B,Y),W("error",G,Y),$(g,b)};ne(Z,g=>{e(t),l(()=>{var b;return(b=e(t))==null?void 0:b.linescores})&&g(se)})}v(m);var le=y(m,2);{var J=g=>{var b=Qt(),P=u(b,!0);v(b),E(()=>F(P,(e(t),l(()=>e(t).error)))),$(g,b)},te=g=>{kt(g,{get eventId(){return e(t),l(()=>e(t).id)},get players(){return e(t),l(()=>e(t).players)},get linescores(){return e(t),l(()=>e(t).linescores)},$$slots:{reddit:(b,P)=>{var O=jt();const B=Me(()=>P.mode);var p=u(O);{let c=Me(()=>(e(t),l(()=>{var a,f,_,I;return(I=(_=(f=(a=e(t))==null?void 0:a.linescores)==null?void 0:f.away)==null?void 0:_.team)==null?void 0:I.displayName}))),r=Me(()=>(e(t),l(()=>{var a,f,_,I;return(I=(_=(f=(a=e(t))==null?void 0:a.linescores)==null?void 0:f.home)==null?void 0:_.team)==null?void 0:I.displayName})));Dt(p,{get awayName(){return e(c)},get homeName(){return e(r)},get mode(){return e(B)}})}v(O),$(b,O)}}})},re=g=>{var b=Yt();$(g,b)};ne(le,g=>{e(t),l(()=>{var b,P;return((b=e(t))==null?void 0:b.error)&&!((P=e(t))!=null&&P.linescores)})?g(J):(e(t),l(()=>{var b;return(b=e(t))==null?void 0:b.linescores})?g(te,1):g(re,!1))})}v(K),W("click",X,()=>history.back()),$(ue,K),Pe()}export{nr as component};
