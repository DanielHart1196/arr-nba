var xe=Object.defineProperty;var Zt=s=>{throw TypeError(s)};var Se=(s,r,o)=>r in s?xe(s,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):s[r]=o;var Kt=(s,r,o)=>Se(s,typeof r!="symbol"?r+"":r,o),Ft=(s,r,o)=>r.has(s)||Zt("Cannot "+o);var N=(s,r,o)=>(Ft(s,r,"read from private field"),o?o.call(s):r.get(s)),ft=(s,r,o)=>r.has(s)?Zt("Cannot add the same private member more than once"):r instanceof WeakSet?r.add(s):r.set(s,o),Pt=(s,r,o,d)=>(Ft(s,r,"write to private field"),d?d.call(s,o):r.set(s,o),o),Xt=(s,r,o)=>(Ft(s,r,"access private method"),o);import{a as E,f as Y,c as Jt}from"../chunks/DYOR36WO.js";import"../chunks/CcCAcYtz.js";import{o as De,a as Te}from"../chunks/9E4dF-An.js";import{e as Ae,u as m,U as Me,Z as D,ag as ke,ah as Ne,af as wt,V as Ee,l as e,W as p,X as f,B as u,Y as v,ae as Qt}from"../chunks/B3tR_vzS.js";import{s as x}from"../chunks/p0_JILK_.js";import{i as jt}from"../chunks/Chkda7mK.js";import{s as te,c as Le,n as y,p as Ie,g as ee,e as re,a as Re,i as Fe}from"../chunks/BZ-v3JAU.js";import{s as et}from"../chunks/BT9b3L6y.js";import{e as L}from"../chunks/LtqmgyD5.js";import{b as Pe}from"../chunks/ZdaZVQ5c.js";import{i as je}from"../chunks/DbUAflhX.js";import{p as ze}from"../chunks/DVt25r4J.js";var O,rt,ut,_t,se;const bt=class bt{constructor(r){ft(this,_t);ft(this,O,new WeakMap);ft(this,rt);ft(this,ut);Pt(this,ut,r)}observe(r,o){var d=N(this,O).get(r)||new Set;return d.add(o),N(this,O).set(r,d),Xt(this,_t,se).call(this).observe(r,N(this,ut)),()=>{var T=N(this,O).get(r);T.delete(o),T.size===0&&(N(this,O).delete(r),N(this,rt).unobserve(r))}}};O=new WeakMap,rt=new WeakMap,ut=new WeakMap,_t=new WeakSet,se=function(){return N(this,rt)??Pt(this,rt,new ResizeObserver(r=>{for(var o of r){bt.entries.set(o.target,o);for(var d of N(this,O).get(o.target)||[])d(o)}}))},Kt(bt,"entries",new WeakMap);let zt=bt;var Be=new zt({box:"border-box"});function Ce(s,r,o){var d=Be.observe(s,()=>o(s[r]));Ae(()=>(m(()=>o(s[r])),d))}function I(s){const r=s.getFullYear(),o=String(s.getMonth()+1).padStart(2,"0"),d=String(s.getDate()).padStart(2,"0");return`${r}${o}${d}`}function R(s,r){const o=new Date(s);return o.setDate(o.getDate()+r),o}function ae(s,r){try{return new Date(s.date).toDateString()===r}catch{return!1}}function oe(s){const r=Array.from(new Map(s.map(o=>[o.id,o])).values());return r.sort((o,d)=>new Date(o.date).getTime()-new Date(d.date).getTime()),r}function Oe(s){var T,Z,K,X,g,F;const r=((Z=(T=s==null?void 0:s.competitions)==null?void 0:T[0])==null?void 0:Z.competitors)??[],o=(X=(K=r.find(P=>P.homeAway==="away"))==null?void 0:K.team)==null?void 0:X.displayName,d=(F=(g=r.find(P=>P.homeAway==="home"))==null?void 0:g.team)==null?void 0:F.displayName;return!o||!d?null:{awayName:o,homeName:d}}var Ue=Y('<div class="text-white/70">No games found...</div>'),qe=Y('<div class="text-white/70">No games found...</div>'),Ge=Y('<a class="block border border-white/10 rounded p-3 hover:border-white/20"><div class="grid grid-cols-[auto_1fr_auto_1fr_auto] gap-x-2 items-center"><div class="row-span-2 justify-self-center"><img alt="away" width="48" height="48" loading="lazy" decoding="async"/></div> <div class="text-center font-medium"> </div> <div class="text-center text-white/70 font-medium">@</div> <div class="text-center font-medium"> </div> <div class="row-span-2 justify-self-center"><img alt="home" width="48" height="48" loading="lazy" decoding="async"/></div> <div class="text-center"> </div> <div class="text-center text-white/70 whitespace-nowrap"> </div> <div class="text-center"> </div></div></a>'),$e=Y('<div class="block border border-white/10 rounded p-3"><div class="grid grid-cols-[auto_1fr_auto_1fr_auto] gap-x-2 items-center"><div class="row-span-2 justify-self-center"><img alt="away" width="48" height="48" loading="lazy" decoding="async"/></div> <div class="text-center font-medium"> </div> <div class="text-center text-white/70 font-medium">@</div> <div class="text-center font-medium"> </div> <div class="row-span-2 justify-self-center"><img alt="home" width="48" height="48" loading="lazy" decoding="async"/></div> <div class="text-center"> </div> <div class="text-center text-white/70 whitespace-nowrap"> </div> <div class="text-center"> </div></div></div>'),We=Y('<div class="w-1/3 shrink-0 px-0.5"><div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3"><!></div></div>'),He=Y('<div class="relative overflow-hidden"><div class="flex w-[300%]"></div></div>'),Ve=Y('<div class="p-4 min-h-screen swipe-area" style="touch-action: pan-y;"><div class="grid grid-cols-[1fr_auto_1fr] items-end mb-4" data-no-swipe="true"><div></div> <div class="justify-self-center" data-no-swipe="true"><div class="flex items-center bg-white/5 border border-white/10 rounded overflow-hidden"><button data-no-swipe="true" class="px-2.5 py-1 hover:bg-white/10 border-r border-white/10">&lt;</button> <span class="px-3 py-1 text-sm font-medium min-w-[140px] text-center"> </span> <button data-no-swipe="true" class="px-2.5 py-1 hover:bg-white/10 border-l border-white/10">&gt;</button></div></div> <div class="justify-self-end" data-no-swipe="true"><div class="flex flex-col items-center gap-1 select-none"><span class="text-[11px] text-white/70 leading-none">Scores</span> <button data-no-swipe="true" type="button" role="switch" aria-label="Toggle scores visibility"><span></span></button></div></div></div> <!></div>');function nr(s,r){Me(r,!1);let o=ze(r,"data",8),d=D(o().events??[]),T=[],Z=[],K,X=!1,g=D(new Date),F=D([]),P=D([]),ht=D([]);const yt=new Set,at=new Set;let xt=D(0),ot=D(0),st=!1,J=D(!1),St=0;function Bt(t,a){var i,l;if(t.length!==a.length)return!1;for(let c=0;c<t.length;c++)if(((i=t[c])==null?void 0:i.id)!==((l=a[c])==null?void 0:l.id))return!1;return!0}async function Dt(){if(!X){X=!0;try{const t=e(g).toDateString();try{sessionStorage.setItem("arrnba.selectedDate",e(g).toISOString())}catch{}const a=new Date(e(g)),i=R(e(g),-1),l=R(e(g),1),c=k=>ae(k,t),h=await y.getScoreboard(I(a));if(h&&h.events){const k=(h.events??[]).filter(c);k.length>0&&!Bt(e(d),k)&&u(d,k)}const[w,A,j]=await Promise.all([y.getScoreboard(I(a)),y.getScoreboard(I(i)),y.getScoreboard(I(l))]),z=(w.events??[]).filter(c),B=(A.events??[]).filter(c),b=(j.events??[]).filter(c),M=[...B,...z,...b],U=oe(M);Bt(e(d),U)||u(d,U),de(e(d));const C=R(e(g),2),n=R(e(g),-2);y.getScoreboard(I(C)).catch(()=>{}),y.getScoreboard(I(n)).catch(()=>{}),Ut(a).catch(()=>{})}catch(t){console.error("Failed to refresh scoreboard:",t)}finally{X=!1}}}function Ct(t){t===1?mt(1):t===-1&&mt(-1)}async function Ot(t){const a=t.toDateString(),i=R(t,-1),l=R(t,1),c=b=>ae(b,a),[h,w,A]=await Promise.all([y.getScoreboard(I(t)),y.getScoreboard(I(i)),y.getScoreboard(I(l))]),j=(h.events??[]).filter(c),z=(w.events??[]).filter(c),B=(A.events??[]).filter(c);return oe([...z,...j,...B])}async function Ut(t){const a=++St,i=R(t,-1),l=R(t,1);try{const[c,h]=await Promise.all([Ot(i),Ot(l)]);if(a!==St)return;T=c,Z=h,u(P,c.map(w=>Q(w,e(_)))),u(ht,h.map(w=>Q(w,e(_))))}catch(c){if(a!==St)return;console.error("Failed to preload adjacent swipe days:",c)}}function ie(t){if(st)return;const a=Math.max(e(xt),320),i=Math.max(-a*.9,Math.min(a*.9,t));u(J,!0),u(ot,i)}function ne(){st||(u(J,!1),u(ot,0))}function mt(t){if(st)return;const a=Math.max(e(xt),320);st=!0,u(J,!1),u(ot,t===1?-a:a),setTimeout(()=>{u(g,R(e(g),t)),t===1?(u(d,Z),u(F,e(ht))):(u(d,T),u(F,e(P))),u(J,!0),u(ot,0),requestAnimationFrame(()=>{st=!1,u(J,!1)}),Ut(e(g)).catch(()=>{}),Dt().catch(()=>{})},180)}function ce(t){return t.toLocaleDateString(void 0,{weekday:"long",month:"short",day:"numeric"})}let it;async function qt(t,a=!1){const i=t==null?void 0:t.id;i&&(!a&&yt.has(i)||(it&&clearTimeout(it),it=setTimeout(async()=>{const l=Oe(t);if(!l)return;const{awayName:c,homeName:h}=l;try{yt.add(i),await Ie(y,c,h)}catch(w){yt.delete(i),console.error(`Failed to preload Reddit data for ${c} vs ${h}:`,w)}},150)))}async function de(t){try{const a=t.map(i=>i.id).filter(i=>!!i).filter(i=>!at.has(i));if(a.length===0)return;a.forEach(i=>at.add(i)),y.prewarmBoxscores(a).catch(()=>{})}catch(a){console.error("Failed to prewarm boxscores:",a)}}function Gt(t){qt(t.event),at.has(t.id)||(at.add(t.id),y.getBoxscore(t.id).catch(()=>{at.delete(t.id)}))}let Tt=D();De(()=>{try{const t=sessionStorage.getItem("arrnba.selectedDate");t&&u(g,new Date(t));const a=localStorage.getItem("arrnba.hideScores");u(_,a==="1")}catch{}K=setInterval(Dt,15e3),Le({target:e(Tt),onSwipeRight:()=>mt(-1),onSwipeLeft:()=>mt(1),onHorizontalDrag:ie,onGestureEnd:t=>{t||ne()},threshold:50}),Dt().then(()=>{le()}),(async()=>{try{await y.getRedditIndex()}catch(t){console.error("Failed to load Reddit index:",t)}})()});function le(){e(d).forEach(t=>{var i,l,c,h;const a=(h=(c=(l=(i=t==null?void 0:t.competitions)==null?void 0:i[0])==null?void 0:l.status)==null?void 0:c.type)==null?void 0:h.name;(a==="STATUS_IN_PROGRESS"||a==="STATUS_HALFTIME")&&qt(t)})}Te(()=>{K&&clearInterval(K),it&&clearTimeout(it)});function ve(t){try{const a=new Date(t),i=a.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit",hour12:!1}),l=a.toLocaleTimeString("en-AU",{timeZoneName:"short"}).split(" ").pop();return`${i} ${l}`}catch{return""}}let _=D(!1);function fe(){u(_,!e(_)),u(F,e(d).map(t=>Q(t,e(_)))),u(P,T.map(t=>Q(t,e(_)))),u(ht,Z.map(t=>Q(t,e(_))));try{localStorage.setItem("arrnba.hideScores",e(_)?"1":"0")}catch{}}function pt(t){const a=t.currentTarget;a&&(a.style.display="none")}function $t(t,a){var i,l,c;return(c=(l=(i=t==null?void 0:t.competitions)==null?void 0:i[0])==null?void 0:l.competitors)==null?void 0:c.find(h=>h.homeAway===a)}function Q(t,a){var j,z,B,b,M,U,C,n;const i=$t(t,"away"),l=$t(t,"home"),h=(((b=(B=(z=(j=t==null?void 0:t.competitions)==null?void 0:j[0])==null?void 0:z.status)==null?void 0:B.type)==null?void 0:b.name)??"")==="STATUS_SCHEDULED",w=ee(i==null?void 0:i.team),A=ee(l==null?void 0:l.team);return{id:t.id,event:t,awayAbbr:w,homeAbbr:A,awayLogo:`/logos/${w}.svg`,homeLogo:`/logos/${A}.svg`,awayScore:h||a?"-":(i==null?void 0:i.score)??0,homeScore:h||a?"-":(l==null?void 0:l.score)??0,statusText:h?ve(t.date):((n=(C=(U=(M=t==null?void 0:t.competitions)==null?void 0:M[0])==null?void 0:U.status)==null?void 0:C.type)==null?void 0:n.shortDetail)??"",scheduled:h}}ke(()=>(e(d),e(_)),()=>{u(F,e(d).map(t=>Q(t,e(_))))}),Ne(),je();var gt=Ve(),At=f(gt),Mt=p(f(At),2),Wt=f(Mt),Ht=f(Wt),kt=p(Ht,2),ue=f(kt,!0);v(kt);var he=p(kt,2);v(Wt),v(Mt);var Vt=p(Mt,2),Yt=f(Vt),nt=p(f(Yt),2),me=f(nt);v(nt),v(Yt),v(Vt),v(At);var pe=p(At,2);{var ge=t=>{var a=Ue();E(t,a)},we=t=>{var a=He(),i=f(a);re(i,5,()=>[e(P),e(F),e(ht)],Fe,(l,c,h)=>{var w=We(),A=f(w),j=f(A);{var z=b=>{var M=qe();E(b,M)},B=b=>{var M=Jt(),U=Qt(M);re(U,1,()=>e(c),C=>C.id,(C,n)=>{var k=Jt(),_e=Qt(k);{var be=tt=>{var S=Ge(),ct=f(S),q=f(ct),dt=f(q);v(q);var G=p(q,2),Nt=f(G,!0);v(G);var $=p(G,4),Et=f($,!0);v($);var W=p($,2),lt=f(W);v(W);var H=p(W,2),Lt=f(H,!0);v(H);var V=p(H,2),It=f(V,!0);v(V);var vt=p(V,2),Rt=f(vt,!0);v(vt),v(ct),v(S),wt(()=>{et(S,"href",(e(n),m(()=>`/game/${e(n).id}`))),et(dt,"src",(e(n),m(()=>e(n).awayLogo))),x(Nt,(e(n),m(()=>e(n).awayAbbr))),x(Et,(e(n),m(()=>e(n).homeAbbr))),et(lt,"src",(e(n),m(()=>e(n).homeLogo))),x(Lt,(e(n),m(()=>e(n).awayScore))),x(It,(e(n),m(()=>e(n).statusText))),x(Rt,(e(n),m(()=>e(n).homeScore)))}),L("error",dt,pt),L("error",lt,pt),L("mouseenter",S,()=>Gt(e(n))),L("touchstart",S,()=>Gt(e(n))),E(tt,S)},ye=tt=>{var S=$e(),ct=f(S),q=f(ct),dt=f(q);v(q);var G=p(q,2),Nt=f(G,!0);v(G);var $=p(G,4),Et=f($,!0);v($);var W=p($,2),lt=f(W);v(W);var H=p(W,2),Lt=f(H,!0);v(H);var V=p(H,2),It=f(V,!0);v(V);var vt=p(V,2),Rt=f(vt,!0);v(vt),v(ct),v(S),wt(()=>{et(dt,"src",(e(n),m(()=>e(n).awayLogo))),x(Nt,(e(n),m(()=>e(n).awayAbbr))),x(Et,(e(n),m(()=>e(n).homeAbbr))),et(lt,"src",(e(n),m(()=>e(n).homeLogo))),x(Lt,(e(n),m(()=>e(n).awayScore))),x(It,(e(n),m(()=>e(n).statusText))),x(Rt,(e(n),m(()=>e(n).homeScore)))}),L("error",dt,pt),L("error",lt,pt),E(tt,S)};jt(_e,tt=>{h===1?tt(be):tt(ye,!1)})}E(C,k)}),E(b,M)};jt(j,b=>{e(c),m(()=>e(c).length===0)?b(z):b(B,!1)})}v(A),v(w),E(l,w)}),v(i),v(a),wt(()=>Re(i,`transform: translate3d(calc(-33.333333% + ${e(ot)??""}px), 0, 0); transition: ${e(J)?"none":"transform 180ms ease-out"};`)),Ce(a,"clientWidth",l=>u(xt,l)),E(t,a)};jt(pe,t=>{e(d),m(()=>!e(d)||e(d).length===0)?t(ge):t(we,!1)})}v(gt),Pe(gt,t=>u(Tt,t),()=>e(Tt)),wt(t=>{x(ue,t),et(nt,"aria-checked",!e(_)),te(nt,1,`relative h-5 w-10 rounded-full border border-white/15 transition-colors ${e(_)?"bg-white/10":"bg-[#4b5563]"}`),te(me,1,`pointer-events-none absolute left-[2px] top-1/2 h-3.5 w-3.5 -translate-y-1/2 rounded-full bg-white transition-transform duration-200 ${e(_)?"":"translate-x-5"}`)},[()=>(e(g),m(()=>ce(e(g))))]),L("click",Ht,()=>Ct(-1)),L("click",he,()=>Ct(1)),L("click",nt,fe),E(s,gt),Ee()}export{nr as component};
