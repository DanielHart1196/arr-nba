import{a as S,f as N,t as De}from"../chunks/DVUZdbEl.js";import"../chunks/D8ZGW8jb.js";import{o as We,a as ot}from"../chunks/BV6NFH77.js";import{h as ke,z as Se,aS as Q,E as _,m as G,l as e,aT as $e,D as f,F as w,at as nt,G as c,B as I,u as v,C as Ae,A as C,aU as he,af as Me,Q as Ke,aR as dt}from"../chunks/mOB0g_sz.js";import{s as k}from"../chunks/Dk1Swlgz.js";import{i as ne}from"../chunks/DYJ-5WiK.js";import{s as Ue}from"../chunks/WbGyEyQw.js";import{e as Y}from"../chunks/Dmu6a9U4.js";import{i as Ne}from"../chunks/DCl0DeTE.js";import{p as fe}from"../chunks/CN7CQmFo.js";import{s as lt}from"../chunks/DeFdX0XQ.js";import{e as ie,i as ue,c as vt,n as Te,a as ct,f as be,r as ut,g as pe}from"../chunks/ChMNwxDu.js";function mt(F,E,x){var t=F==null?"":""+F;return t===""?null:t}function ft(F,E){return F==null?null:String(F)}function oe(F,E,x,t,W,R){var j=F.__className;if(ke||j!==x||j===void 0){var g=mt(x);(!ke||g!==F.getAttribute("class"))&&(g==null?F.removeAttribute("class"):F.className=g),F.__className=x}return R}function ge(F,E,x,t){var W=F.__style;if(ke||W!==E){var R=ft(E);(!ke||R!==F.getAttribute("style"))&&(R==null?F.removeAttribute("style"):F.style.cssText=R),F.__style=E}return t}var pt=N("<div> </div>"),ht=N('<div class="py-1 text-center font-semibold"> </div>'),_t=N('<div class="py-1 text-center"> </div>'),bt=N("<div></div>"),xt=N('<div class="py-1 text-center font-semibold"> </div>'),yt=N('<div class="border border-white/10 rounded text-xs scroll-container stats-table-container"><div class="grid"><div><div class="px-1 py-1 font-semibold text-left border-b-2 border-white/20">PLAYER</div> <!> <div class="border-t-2 border-white/20 px-1 py-1 font-semibold text-left">TOTAL</div></div> <div class="overflow-x-auto" data-scrollable="true"><div class="grid border-b-2 border-white/20"></div> <!> <div class="grid border-t-2 border-white/20"></div></div></div></div>');function wt(F,E){Se(E,!1);const x=C(),t=C(),W=C(),R=C(),j=C(),g=C();let B=fe(E,"players",8);const n=["MIN","PTS","REB","AST","STL","BLK","OREB","DREB","FGM","FGA","FG%","3PM","3PA","3P%","FTM","FTA","FT%","PF","TO","+/-"],H=["FG%","3P%","FT%"],U=n.filter(h=>h!=="MIN"&&h!=="+/-"&&!H.includes(h));function J(h,u){return u==="FG%"?h.stats["FG%"]+"%":u==="3P%"?h.stats["3P%"]+"%":u==="FT%"?h.stats["FT%"]+"%":h.stats[u]}function m(h){const u=(h||"").split(" ").filter(Boolean);if(u.length===0)return h||"";if(u.length===1)return u[0];const r=u[0][0].toUpperCase()+".",i=u.slice(1).join(" ");return`${r} ${i}`}function X(h,u){return u>0?Math.round(h/u*100):0}function se(h,u){return h.reduce((r,i)=>{var y;const p=Number(((y=i==null?void 0:i.stats)==null?void 0:y[u])??0);return r+(Number.isFinite(p)?p:0)},0)}function de(h){const u={};for(const r of U)u[r]=se(h,r);return u.MIN="",u["+/-"]="",u["FG%"]=`${X(Number(u.FGM??0),Number(u.FGA??0))}%`,u["3P%"]=`${X(Number(u["3PM"]??0),Number(u["3PA"]??0))}%`,u["FT%"]=`${X(Number(u.FTM??0),Number(u.FTA??0))}%`,u}Q(()=>G(B()),()=>{_(x,B()??[])}),Q(()=>e(x),()=>{_(t,e(x).map(h=>({...h,displayName:m((h==null?void 0:h.name)??"")})))}),Q(()=>e(x),()=>{_(W,de(e(x)))}),Q(()=>e(t),()=>{_(R,Math.max(...e(t).map(h=>h.displayName.length),6))}),Q(()=>e(R),()=>{_(j,`${Math.min(e(R),13)}ch`)}),Q(()=>{},()=>{_(g,"2.2rem")}),$e(),Ne();var te=yt(),re=f(te),T=f(re),b=w(f(T),2);ie(b,1,()=>e(t),ue,(h,u,r)=>{var i=pt();oe(i,1,`${r===5?"border-t-2 border-white/20":"border-t border-white/5"} px-1 py-1 text-left truncate`);var p=f(i,!0);c(i),I(()=>k(p,(e(u),v(()=>e(u).displayName)))),S(h,i)}),nt(2),c(T);var P=w(T,2),L=f(P);ie(L,5,()=>n,ue,(h,u)=>{var r=ht(),i=f(r,!0);c(r),I(()=>k(i,e(u))),S(h,r)}),c(L);var D=w(L,2);ie(D,1,()=>e(t),ue,(h,u,r)=>{var i=bt();oe(i,1,`grid ${r===5?"border-t-2 border-white/20":"border-t border-white/5"}`),ie(i,5,()=>n,ue,(p,y)=>{var V=_t(),K=f(V,!0);c(V),I(s=>k(K,s),[()=>(e(u),e(y),v(()=>J(e(u),e(y))))]),S(p,V)}),c(i),I(()=>ge(i,`width:max-content; grid-template-columns: repeat(${v(()=>n.length)??""}, ${e(g)??""})`)),S(h,i)});var q=w(D,2);ie(q,5,()=>n,ue,(h,u)=>{var r=xt(),i=f(r,!0);c(r),I(()=>k(i,(e(W),e(u),v(()=>e(W)[e(u)]??"")))),S(h,r)}),c(q),c(P),c(re),c(te),I(()=>{ge(re,`grid-template-columns: ${e(j)??""} 1fr`),ge(L,`width:max-content; grid-template-columns: repeat(${v(()=>n.length)??""}, ${e(g)??""})`),ge(q,`width:max-content; grid-template-columns: repeat(${v(()=>n.length)??""}, ${e(g)??""})`)}),S(F,te),Ae()}var gt=N('<div class="px-2 py-1 text-right font-semibold"> </div>'),Tt=N('<div class="px-2 py-1 text-right font-semibold"></div>'),St=N('<div class="px-2 py-1 text-right"> </div>'),$t=N('<div class="px-2 py-1 text-right"> </div>'),At=N('<div class="px-2 py-1 text-right"> </div>'),Nt=N('<div class="px-2 py-1 text-right"> </div>'),Pt=N('<div class="mb-2 border border-white/10 rounded text-xs swipe-area"><div class="grid"><div class="sticky-col px-2 py-1 font-semibold text-left">TEAM</div> <div></div> <!> <div class="px-2 py-1 text-right font-semibold">TOT</div> <!> <div class="sticky-col px-2 py-1 text-left"> </div> <div></div> <!> <div class="px-2 py-1 text-right font-semibold"> </div> <!> <div class="sticky-col px-2 py-1 text-left"> </div> <div></div> <!> <div class="px-2 py-1 text-right font-semibold"> </div> <!></div></div>');function kt(F,E){Se(E,!1);const x=C(),t=C(),W=C(),R=C(),j=C(),g=C(),B=C();let n=fe(E,"linescores",8);function H(r){return(r==null?void 0:r.abbreviation)||(r==null?void 0:r.shortDisplayName)||(r!=null&&r.displayName?r.displayName.split(" ").map(i=>i[0]).join("").toUpperCase():"")}Q(()=>G(n()),()=>{var r,i,p,y,V,K;_(x,Math.max(4,((p=(i=(r=n())==null?void 0:r.home)==null?void 0:i.periods)==null?void 0:p.length)??0,((K=(V=(y=n())==null?void 0:y.away)==null?void 0:V.periods)==null?void 0:K.length)??0))}),Q(()=>e(x),()=>{_(t,Math.max(0,e(x)-4))}),Q(()=>G(n()),()=>{var r,i;_(W,H((i=(r=n())==null?void 0:r.away)==null?void 0:i.team)||"")}),Q(()=>G(n()),()=>{var r,i;_(R,H((i=(r=n())==null?void 0:r.home)==null?void 0:i.team)||"")}),Q(()=>(e(W),e(R)),()=>{_(j,Math.max(e(W).length,e(R).length))}),Q(()=>e(j),()=>{_(g,`${Math.min(Math.max(e(j),3),6)}ch`)}),Q(()=>(e(g),e(t)),()=>{_(B,`${e(g)} 1fr repeat(4, 2.2rem) 2.2rem${e(t)>0?` repeat(${e(t)}, 2.2rem)`:""}`)}),$e(),Ne();var U=Pt(),J=f(U),m=w(f(J),4);ie(m,0,()=>[1,2,3,4],ue,(r,i)=>{var p=gt(),y=f(p);c(p),I(()=>k(y,`Q${i??""}`)),S(r,p)});var X=w(m,4);ie(X,1,()=>(e(t),v(()=>Array(e(t)))),ue,(r,i,p)=>{var y=Tt();y.textContent=`OT${p+1}`,S(r,y)});var se=w(X,2),de=f(se,!0);c(se);var te=w(se,4);ie(te,0,()=>[0,1,2,3],ue,(r,i)=>{var p=St(),y=f(p,!0);c(p),I(()=>k(y,(G(n()),v(()=>{var V,K,s;return((s=(K=(V=n())==null?void 0:V.away)==null?void 0:K.periods)==null?void 0:s[i])??""})))),S(r,p)});var re=w(te,2),T=f(re,!0);c(re);var b=w(re,2);ie(b,1,()=>(e(t),v(()=>Array(e(t)))),ue,(r,i,p)=>{var y=$t(),V=f(y,!0);c(y),I(()=>k(V,(G(n()),v(()=>{var K,s,O;return((O=(s=(K=n())==null?void 0:K.away)==null?void 0:s.periods)==null?void 0:O[p+4])??""})))),S(r,y)});var P=w(b,2),L=f(P,!0);c(P);var D=w(P,4);ie(D,0,()=>[0,1,2,3],ue,(r,i)=>{var p=At(),y=f(p,!0);c(p),I(()=>k(y,(G(n()),v(()=>{var V,K,s;return((s=(K=(V=n())==null?void 0:V.home)==null?void 0:K.periods)==null?void 0:s[i])??""})))),S(r,p)});var q=w(D,2),h=f(q,!0);c(q);var u=w(q,2);ie(u,1,()=>(e(t),v(()=>Array(e(t)))),ue,(r,i,p)=>{var y=Nt(),V=f(y,!0);c(y),I(()=>k(V,(G(n()),v(()=>{var K,s,O;return((O=(s=(K=n())==null?void 0:K.home)==null?void 0:s.periods)==null?void 0:O[p+4])??""})))),S(r,y)}),c(J),c(U),I((r,i)=>{ge(J,`grid-template-columns: ${e(B)??""}`),k(de,r),k(T,(G(n()),v(()=>{var p,y;return(y=(p=n())==null?void 0:p.away)==null?void 0:y.total}))),k(L,i),k(h,(G(n()),v(()=>{var p,y;return(y=(p=n())==null?void 0:p.home)==null?void 0:y.total})))},[()=>(G(n()),v(()=>{var r,i;return H((i=(r=n())==null?void 0:r.away)==null?void 0:i.team)})),()=>(G(n()),v(()=>{var r,i;return H((i=(r=n())==null?void 0:r.home)==null?void 0:i.team)}))]),S(F,U),Ae()}var Ft=N('<div class="grid grid-cols-2 gap-2 mb-2 swipe-area"><button> </button> <button> </button></div>'),It=N('<div><div class="grid grid-cols-3 gap-2 mb-2 swipe-area"><div class="text-center"><button>LIVE</button> <div></div></div> <div class="text-center"><button>STATS</button> <div></div></div> <div class="text-center"><button>POST</button> <div></div></div></div> <!> <!> <!> <div><!></div></div>');function Et(F,E){Se(E,!1);const x=C(),t=C(),W=C();let R=fe(E,"eventId",8),j=fe(E,"players",8),g=fe(E,"linescores",8),B=C("away"),n=C("STATS");We(()=>{try{const s=localStorage.getItem(`arrnba.lastSide.${R()}`);(s==="home"||s==="away")&&_(B,s);const O=localStorage.getItem(`arrnba.viewMode.${R()}`);(O==="STATS"||O==="LIVE"||O==="POST")&&_(n,O)}catch{}});function H(s){if(e(B)!==s){_(B,s);try{localStorage.setItem(`arrnba.lastSide.${R()}`,s)}catch{}}}function U(s){if(e(n)!==s){_(n,s);try{localStorage.setItem(`arrnba.viewMode.${R()}`,s)}catch{}}}function J(s){if(s==="right"){e(n)==="STATS"?U("LIVE"):e(n)==="LIVE"?U("POST"):U("STATS");return}e(n)==="STATS"?U("POST"):e(n)==="POST"?U("LIVE"):U("STATS")}vt({onSwipeRight:()=>J("right"),onSwipeLeft:()=>J("left"),threshold:50});function m(s){return(s==null?void 0:s.abbreviation)||(s==null?void 0:s.shortDisplayName)||(s!=null&&s.displayName?s.displayName.split(" ").map(O=>O[0]).join("").toUpperCase():"")}Q(()=>(G(j()),e(B)),()=>{var s;_(x,((s=j())==null?void 0:s[e(B)])??[])}),Q(()=>G(g()),()=>{var s,O;_(t,(O=(s=g())==null?void 0:s.away)!=null&&O.team?m(g().away.team):"")}),Q(()=>G(g()),()=>{var s,O;_(W,(O=(s=g())==null?void 0:s.home)!=null&&O.team?m(g().home.team):"")}),$e(),Ne();var X=It(),se=f(X),de=f(se),te=f(de),re=w(te,2);c(de);var T=w(de,2),b=f(T),P=w(b,2);c(T);var L=w(T,2),D=f(L),q=w(D,2);c(L),c(se);var h=w(se,2);{var u=s=>{kt(s,{get linescores(){return g()}})};ne(h,s=>{e(n)==="STATS"&&g()&&s(u)})}var r=w(h,2);{var i=s=>{var O=Ft(),d=f(O),$=f(d,!0);c(d);var A=w(d,2),a=f(A,!0);c(A),c(O),I(()=>{oe(d,1,`w-full py-2 rounded font-semibold ${e(B)==="away"?"bg-white/25 text-white":"bg-black text-white border border-white/20"}`),k($,e(t)),oe(A,1,`w-full py-2 rounded font-semibold ${e(B)==="home"?"bg-white/25 text-white":"bg-black text-white border border-white/20"}`),k(a,e(W))}),Y("click",d,()=>H("away")),Y("click",A,()=>H("home")),S(s,O)};ne(r,s=>{e(n)==="STATS"&&g()&&s(i)})}var p=w(r,2);{var y=s=>{wt(s,{get players(){return e(x)}})};ne(p,s=>{e(n)==="STATS"&&j()&&s(y)})}var V=w(p,2),K=f(V);lt(K,E,"reddit",{get mode(){return e(n)},get side(){return e(B)}}),c(V),c(X),I(()=>{oe(te,1,`w-full py-2 font-semibold ${e(n)==="LIVE"?"text-white":"text-white/70"}`),oe(re,1,`${e(n)==="LIVE"?"bg-white":"bg-transparent"} h-0.5 w-full mt-2`),oe(b,1,`w-full py-2 font-semibold ${e(n)==="STATS"?"text-white":"text-white/70"}`),oe(P,1,`${e(n)==="STATS"?"bg-white":"bg-transparent"} h-0.5 w-full mt-2`),oe(D,1,`w-full py-2 font-semibold ${e(n)==="POST"?"text-white":"text-white/70"}`),oe(q,1,`${e(n)==="POST"?"bg-white":"bg-transparent"} h-0.5 w-full mt-2`),oe(V,1,`${e(n)==="STATS"?"hidden":""} swipe-area`)}),Y("click",te,()=>U("LIVE")),Y("click",b,()=>U("STATS")),Y("click",D,()=>U("POST")),S(F,X),Ae()}var Lt=N('<a class="text-white/70 hover:text-white underline" target="_blank" rel="noopener noreferrer">Open Thread</a>'),Ot=N('<div class="text-white/70 flex items-center gap-2"><div class="animate-spin w-4 h-4 border-2 border-white/30 border-t-white rounded-full"></div> Loading comments...</div>'),Ct=N('<div class="bg-red-900/20 border border-red-500/50 rounded p-3 mb-3"><div class="text-red-400 font-semibold mb-1">Reddit Error</div> <div class="text-sm text-red-300/80"> </div> <button class="mt-2 text-xs underline text-red-400 hover:text-red-300">Try again</button></div>'),Rt=N('<div class="text-white/70">No comments yet.</div>'),Bt=N('<div class="whitespace-pre-wrap"> </div>'),Vt=N('<div role="button" tabindex="0" class="w-full text-left cursor-pointer"><div class="text-sm text-white/70"> </div> <!></div>'),Gt=N('<div class="mt-2 pl-3 border-l border-white/10 space-y-2"></div>'),Dt=N('<div class="whitespace-pre-wrap"> </div> <!>',1),Kt=N('<div role="button" tabindex="0" class="w-full text-left cursor-pointer"><div class="text-sm text-white/70"> </div> <!></div>'),Mt=N('<div class="mt-2 pl-3 border-l border-white/10 space-y-2"></div>'),Ut=N('<div class="mt-1 whitespace-pre-wrap"> </div> <!>',1),qt=N('<div role="button" tabindex="0" class="w-full text-left border border-white/10 rounded p-2 cursor-pointer"><div class="text-sm text-white/70"> </div> <!></div>'),Qt=N('<div class="space-y-3"></div>'),Wt=N('<div><div class="flex items-center justify-between mb-3"><div class="flex items-center gap-2 text-xs font-semibold"><button>NEW</button> <button>TOP</button> <button class="px-3 py-1 rounded bg-blue-600 hover:bg-blue-700 text-white">REFRESH</button></div> <!></div> <!></div>');function jt(F,E){Se(E,!1);const x=C(),t=C(),W=C();let R=fe(E,"awayName",8),j=fe(E,"homeName",8),g=fe(E,"mode",8),B=C("new"),n=C(!1),H=C(""),U={LIVE:!1,POST:!1},J=0,m=C({LIVE:{thread:null,comments:[]},POST:{thread:null,comments:[]}});async function X(d,$,A,a=!1){if(!(d!=null&&d.id))return;const o=++J;_(H,""),e(m)[A].comments.length||_(n,!0);try{const l=await Te.getRedditComments(d.id,$,d.permalink,a);if(o!==J||g()!==A)return;he(m,e(m)[A].comments=T(l.comments??[],e(B))),_(m,{...e(m)})}catch(l){if(o!==J||g()!==A)return;console.error("Failed to fetch comments:",l),_(H,l instanceof Error?l.message:"Failed to fetch comments")}finally{o===J&&g()===A&&_(n,!1)}}async function se(d){const $=d==="POST"?"top":"new";try{const a=(await Te.getRedditIndex())[ct(R(),j())];let o=d==="POST"?a==null?void 0:a.pgt:a==null?void 0:a.gdt;if(o){he(m,e(m)[d].thread=o),_(m,{...e(m)}),await X(o,$,d);return}if(U[d])g()===d&&!e(m)[d].thread&&(he(m,e(m)[d].comments=[]),_(m,{...e(m)}),_(n,!1));else{U[d]=!0,e(m)[d].thread||_(n,!0);const l=await Te.searchRedditThread({type:d==="POST"?"post":"live",awayCandidates:[R()],homeCandidates:[j()]});o=(l==null?void 0:l.post)??null,o?(he(m,e(m)[d].thread=o),_(m,{...e(m)}),await X(o,$,d)):g()===d&&(he(m,e(m)[d].thread=null),he(m,e(m)[d].comments=[]),_(m,{...e(m)}),_(n,!1))}}catch(A){console.error(`Error ensuring ${d} thread:`,A),g()===d&&_(n,!1)}}function de(d){var A;if(!e(x))return;const $=(A=e(m)[e(x)].comments)==null?void 0:A[d];$&&($._collapsed=!$._collapsed,_(m,{...e(m)}))}function te(d,$){var a,o,l;if(!e(x))return;const A=(l=(o=(a=e(m)[e(x)].comments)==null?void 0:a[d])==null?void 0:o.replies)==null?void 0:l[$];A&&(A._collapsed=!A._collapsed,_(m,{...e(m)}))}function re(d,$,A){var o,l,M,Z,ee;if(!e(x))return;const a=(ee=(Z=(M=(l=(o=e(m)[e(x)].comments)==null?void 0:o[d])==null?void 0:l.replies)==null?void 0:M[$])==null?void 0:Z.replies)==null?void 0:ee[A];a&&(a._collapsed=!a._collapsed,_(m,{...e(m)}))}function T(d,$){const A=(o,l)=>$==="top"?((l==null?void 0:l.score)??0)-((o==null?void 0:o.score)??0):((l==null?void 0:l.created_utc)??0)-((o==null?void 0:o.created_utc)??0);function a(o){const l=(o||[]).map(M=>({...M,replies:a((M==null?void 0:M.replies)||[])}));return l.sort(A),l}return a(d||[])}function b(){e(x)&&(he(m,e(m)[e(x)].comments=T(e(m)[e(x)].comments,e(B))),_(m,{...e(m)}))}async function P(){if(!e(x))return;const d=e(m)[e(x)].thread;if(!d)return;const $=e(x)==="POST"?"top":"new";await X(d,$,e(x),!0)}Q(()=>G(g()),()=>{_(x,g()==="LIVE"||g()==="POST"?g():null)}),Q(()=>(e(x),e(m)),()=>{_(t,e(x)?e(m)[e(x)].thread:null)}),Q(()=>(e(x),e(m)),()=>{_(W,e(x)?e(m)[e(x)].comments:[])}),Q(()=>G(g()),()=>{if(g()==="LIVE"||g()==="POST"){const d=g()==="POST"?"top":"new";_(B,d),se(g())}else _(n,!1)}),$e(),Ne();var L=Wt(),D=f(L),q=f(D),h=f(q),u=w(h,2),r=w(u,2);c(q);var i=w(q,2);{var p=d=>{var $=Lt();I(()=>Ue($,"href",(e(t),v(()=>e(t).url||(e(t).permalink?`https://www.reddit.com${e(t).permalink}`:`https://www.reddit.com/comments/${e(t).id}`))))),S(d,$)};ne(i,d=>{e(t)&&d(p)})}c(D);var y=w(D,2);{var V=d=>{var $=Ot();S(d,$)},K=d=>{var $=Ct(),A=w(f($),2),a=f(A,!0);c(A);var o=w(A,2);c($),I(()=>k(a,e(H))),Y("click",o,P),S(d,$)},s=d=>{var $=Rt();S(d,$)},O=d=>{var $=Qt();ie($,7,()=>e(W),(A,a)=>A.id||a,(A,a,o)=>{var l=qt(),M=f(l),Z=f(M);c(M);var ee=w(M,2);{var me=le=>{var xe=Ut(),_e=Me(xe),je=f(_e,!0);c(_e);var ze=w(_e,2);{var He=Fe=>{var Ie=Mt();ie(Ie,7,()=>(e(a),v(()=>e(a).replies)),(Ee,z)=>Ee.id||z,(Ee,z,Pe)=>{var ye=Kt(),Le=f(ye),Ye=f(Le);c(Le);var Je=w(Le,2);{var Xe=ve=>{var qe=Dt(),Oe=Me(qe),Ze=f(Oe,!0);c(Oe);var et=w(Oe,2);{var tt=Ce=>{var Re=Gt();ie(Re,7,()=>(e(z),v(()=>e(z).replies)),(Be,ae)=>Be.id||ae,(Be,ae,Qe)=>{var we=Vt(),Ve=f(we),rt=f(Ve);c(Ve);var at=w(Ve,2);{var it=ce=>{var Ge=Bt(),st=f(Ge,!0);c(Ge),I(()=>k(st,(e(ae),v(()=>e(ae).body)))),S(ce,Ge)};ne(at,ce=>{e(ae),v(()=>!e(ae)._collapsed)&&ce(it)})}c(we),I(ce=>k(rt,`${e(ae),v(()=>e(ae).author)??""} - ${e(ae),v(()=>e(ae).score)??""} - ${ce??""} ${e(ae),v(()=>e(ae)._collapsed?"- collapsed":"")??""}`),[()=>(G(be),e(ae),v(()=>be(e(ae).created_utc)))]),Y("click",we,ce=>{ce.stopPropagation(),re(e(o),e(Pe),e(Qe))}),Y("keydown",we,ce=>{(ce.key==="Enter"||ce.key===" ")&&(ce.stopPropagation(),re(e(o),e(Pe),e(Qe)))}),S(Be,we)}),c(Re),S(Ce,Re)};ne(et,Ce=>{e(z),v(()=>e(z).replies&&e(z).replies.length)&&Ce(tt)})}I(()=>k(Ze,(e(z),v(()=>e(z).body)))),S(ve,qe)};ne(Je,ve=>{e(z),v(()=>!e(z)._collapsed)&&ve(Xe)})}c(ye),I(ve=>k(Ye,`${e(z),v(()=>e(z).author)??""} - ${e(z),v(()=>e(z).score)??""} - ${ve??""} ${e(z),v(()=>e(z)._collapsed?"- collapsed":"")??""}`),[()=>(G(be),e(z),v(()=>be(e(z).created_utc)))]),Y("click",ye,ve=>{ve.stopPropagation(),te(e(o),e(Pe))}),Y("keydown",ye,ve=>{(ve.key==="Enter"||ve.key===" ")&&(ve.stopPropagation(),te(e(o),e(Pe)))}),S(Ee,ye)}),c(Ie),S(Fe,Ie)};ne(ze,Fe=>{e(a),v(()=>e(a).replies&&e(a).replies.length)&&Fe(He)})}I(()=>k(je,(e(a),v(()=>e(a).body)))),S(le,xe)};ne(ee,le=>{e(a),v(()=>!e(a)._collapsed)&&le(me)})}c(l),I(le=>k(Z,`${e(a),v(()=>e(a).author)??""} - ${e(a),v(()=>e(a).score)??""} - ${le??""} ${e(a),v(()=>e(a)._collapsed?"- collapsed":"")??""}`),[()=>(G(be),e(a),v(()=>be(e(a).created_utc)))]),Y("click",l,()=>de(e(o))),Y("keydown",l,le=>{(le.key==="Enter"||le.key===" ")&&de(e(o))}),S(A,l)}),c($),S(d,$)};ne(y,d=>{e(n)?d(V):e(H)?d(K,1):e(t)?d(O,!1):d(s,2)})}c(L),I(()=>{oe(h,1,`px-3 py-1 rounded ${e(B)==="new"?"bg-white/25 text-white":"bg-black text-white border border-white/20"}`),oe(u,1,`px-3 py-1 rounded ${e(B)==="top"?"bg-white/25 text-white":"bg-black text-white border border-white/20"}`)}),Y("click",h,()=>{_(B,"new"),b()}),Y("click",u,()=>{_(B,"top"),b()}),Y("click",r,P),S(F,L),Ae()}var zt=N('<div class="flex items-center justify-between text-lg font-semibold"><div class="flex items-center gap-2"><img alt="away" width="28" height="28" loading="eager" decoding="async"/> <span> </span></div> <span> </span> <div class="flex items-center gap-2"><span> </span> <img alt="home" width="28" height="28" loading="eager" decoding="async"/></div></div> <div class="text-center text-white/70 text-sm mt-1"><!></div>',1),Ht=N('<div class="text-red-400"> </div>'),Yt=N('<div slot="reddit"><!></div>'),Jt=N('<div class="flex items-center justify-center py-8"><div class="animate-spin w-8 h-8 border-4 border-white/10 border-t-white/70 rounded-full"></div></div>'),Xt=N('<div class="p-4"><button class="text-white/70 hover:text-white">Back</button> <div class="mt-2 mb-2 min-h-[60px] swipe-area"><!></div> <!></div>');function cr(F,E){Se(E,!1);let x=fe(E,"data",8),t=C(null),W,R;async function j(){try{const T=await Te.getBoxscore(x().id);_(t,{...T})}catch(T){console.error("Failed to refresh boxscore:",T)}}async function g(){var P,L,D,q,h,u,r,i;const T=(q=(D=(L=(P=e(t))==null?void 0:P.linescores)==null?void 0:L.away)==null?void 0:D.team)==null?void 0:q.displayName,b=(i=(r=(u=(h=e(t))==null?void 0:h.linescores)==null?void 0:u.home)==null?void 0:r.team)==null?void 0:i.displayName;if(!(!T||!b))try{await ut(Te,T,b)}catch(p){console.error("Failed to refresh Reddit data:",p)}}We(()=>{e(t)||j(),W=setInterval(j,15e3),R=setInterval(g,3e4)}),ot(()=>{W&&clearInterval(W),R&&clearInterval(R)});function B(T){const b=(T||"").trim();if(!b)return"";const P=/Q(\d)\s+([0-9:]+)/i.exec(b);if(P){const L=P[1];return`${P[2]} Q${L}`}return b.toUpperCase()}function n(T){const b=T.currentTarget;b&&(b.style.display="none")}Q(()=>(G(x()),e(t)),()=>{var T;(T=x().streamed)!=null&&T.payload&&x().streamed.payload.then(b=>{e(t)||_(t,b)}).catch(b=>{console.error("Failed to load streamed payload:",b)})}),$e(),Ne();var H=Xt(),U=f(H),J=w(U,2),m=f(J);{var X=T=>{var b=zt(),P=Me(b),L=f(P),D=f(L),q=w(D,2),h=f(q,!0);c(q),c(L);var u=w(L,2),r=f(u);c(u);var i=w(u,2),p=f(i),y=f(p,!0);c(p);var V=w(p,2);c(i),c(P);var K=w(P,2),s=f(K);{var O=a=>{var o=De("FINAL");S(a,o)},d=dt(()=>(e(t),v(()=>{var a,o,l,M,Z,ee;return((o=(a=e(t))==null?void 0:a.status)==null?void 0:o.name)&&((ee=(Z=(M=(l=e(t))==null?void 0:l.status)==null?void 0:M.name)==null?void 0:Z.toUpperCase())==null?void 0:ee.includes("FINAL"))}))),$=a=>{var o=De();I(l=>k(o,l),[()=>(e(t),v(()=>{var l,M;return B((M=(l=e(t))==null?void 0:l.status)==null?void 0:M.short)}))]),S(a,o)},A=a=>{var o=De();I(l=>k(o,l),[()=>(e(t),v(()=>{var l,M,Z,ee,me,le,xe,_e;return B((M=(l=e(t))==null?void 0:l.status)!=null&&M.clock&&((ee=(Z=e(t))==null?void 0:Z.status)!=null&&ee.period)?`Q${(le=(me=e(t))==null?void 0:me.status)==null?void 0:le.period} ${(_e=(xe=e(t))==null?void 0:xe.status)==null?void 0:_e.clock}`:"")}))]),S(a,o)};ne(s,a=>{e(d)?a(O):(e(t),v(()=>{var o,l;return(l=(o=e(t))==null?void 0:o.status)==null?void 0:l.short})?a($,1):a(A,!1))})}c(K),I((a,o,l,M)=>{Ue(D,"src",a),k(h,o),k(r,`${e(t),v(()=>{var Z,ee,me;return(me=(ee=(Z=e(t))==null?void 0:Z.linescores)==null?void 0:ee.away)==null?void 0:me.total})??""} - ${e(t),v(()=>{var Z,ee,me;return(me=(ee=(Z=e(t))==null?void 0:Z.linescores)==null?void 0:ee.home)==null?void 0:me.total})??""}`),k(y,l),Ue(V,"src",M)},[()=>(G(pe),e(t),v(()=>{var a,o,l;return`/logos/${pe((l=(o=(a=e(t))==null?void 0:a.linescores)==null?void 0:o.away)==null?void 0:l.team)}.svg`})),()=>(G(pe),e(t),v(()=>{var a,o,l;return pe((l=(o=(a=e(t))==null?void 0:a.linescores)==null?void 0:o.away)==null?void 0:l.team)})),()=>(G(pe),e(t),v(()=>{var a,o,l;return pe((l=(o=(a=e(t))==null?void 0:a.linescores)==null?void 0:o.home)==null?void 0:l.team)})),()=>(G(pe),e(t),v(()=>{var a,o,l;return`/logos/${pe((l=(o=(a=e(t))==null?void 0:a.linescores)==null?void 0:o.home)==null?void 0:l.team)}.svg`}))]),Y("error",D,n),Y("error",V,n),S(T,b)};ne(m,T=>{e(t),v(()=>{var b;return(b=e(t))==null?void 0:b.linescores})&&T(X)})}c(J);var se=w(J,2);{var de=T=>{var b=Ht(),P=f(b,!0);c(b),I(()=>k(P,(e(t),v(()=>e(t).error)))),S(T,b)},te=T=>{Et(T,{get eventId(){return e(t),v(()=>e(t).id)},get players(){return e(t),v(()=>e(t).players)},get linescores(){return e(t),v(()=>e(t).linescores)},$$slots:{reddit:(b,P)=>{var L=Yt();const D=Ke(()=>P.mode);var q=f(L);{let h=Ke(()=>(e(t),v(()=>{var r,i,p,y;return(y=(p=(i=(r=e(t))==null?void 0:r.linescores)==null?void 0:i.away)==null?void 0:p.team)==null?void 0:y.displayName}))),u=Ke(()=>(e(t),v(()=>{var r,i,p,y;return(y=(p=(i=(r=e(t))==null?void 0:r.linescores)==null?void 0:i.home)==null?void 0:p.team)==null?void 0:y.displayName})));jt(q,{get awayName(){return e(h)},get homeName(){return e(u)},get mode(){return e(D)}})}c(L),S(b,L)}}})},re=T=>{var b=Jt();S(T,b)};ne(se,T=>{e(t),v(()=>{var b,P;return((b=e(t))==null?void 0:b.error)&&!((P=e(t))!=null&&P.linescores)})?T(de):(e(t),v(()=>{var b;return(b=e(t))==null?void 0:b.linescores})?T(te,1):T(re,!1))})}c(H),Y("click",U,()=>history.back()),S(F,H),Ae()}export{cr as component};
